(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{101:function(e,t,a){"use strict";a.r(t);var n=a(43),s=a(6),r=a(7),i=a(9),c=a(8),o=a(10),l=a(0),u=a.n(l),m=a(44),h=a(45),d=a(73),f=a.n(d),p=a(15),v=(a(85),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).search=function(e){a.props.onSearch(e)},a.handleChange=function(e){a.setState({value:e.target.value.trim()})},a.handleSubmit=function(e){e.preventDefault(),a.search(a.state.value)},a.handleClear=function(){a.setState({value:""})},a.state={value:""},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=f.a.parse(window.location.search).title,t=void 0===e?"":e;this.setState({value:t}),this.search(t)}},{key:"render",value:function(){return u.a.createElement("form",{className:"magnet-search-form",onSubmit:this.handleSubmit},u.a.createElement(p.a,{className:"icon icon-search",type:"search"}),u.a.createElement("input",{type:"text",maxLength:"20",placeholder:"Search ...",autoComplete:"off",autoFocus:"autofocus",spellCheck:"false",value:this.state.value,onChange:this.handleChange}),u.a.createElement(p.a,{className:"icon icon-close",type:"close",onClick:this.handleClear,"v-show":"keyword !== ''"}))}}]),t}(l.Component)),g=a(86),b=a.n(g),y=(a(88),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"copy",value:function(){}},{key:"render",value:function(){var e=this;return u.a.createElement("ul",{className:"magnet-list"},this.props.list.map(function(t,a){return u.a.createElement("li",{className:"magnet-list__item",key:a},u.a.createElement("div",{className:"magnet"},u.a.createElement("div",{className:"magnet__content"},u.a.createElement("h4",{className:"magnet__title"},t.title),u.a.createElement("div",{className:"magnet__sub-info"},u.a.createElement("time",{className:"magnet__create-time"},u.a.createElement(p.a,{className:"icon-time",type:"calendar"}),b()(t.created,b.a.ISO_8601).format("YYYY-MM-DD")),u.a.createElement("span",{className:"magnet__size"},u.a.createElement(p.a,{className:"icon-attachment",type:"attachment"}),(t.length/1073741824).toFixed(2)," G"))),u.a.createElement("div",{className:"magnet__attachment"},u.a.createElement("button",{className:"copy-btn",onClick:function(){return e.copy(t.magnet)}},"\u590d\u5236\u78c1\u529b\u94fe\u63a5"))))}))}}]),t}(l.Component)),E=(a(89),window.innerHeight),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={list:[],searchParams:{title:"",page:1},isLoading:!1,noMore:!1,hasError:!1,message:""},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"setSearchParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({searchParams:Object.assign(this.state.searchParams,e)})}},{key:"getMagnetByTitle",value:function(){var e=this,t=Object(n.a)({},this.state.searchParams);this.updateLoading(!0),this.setState({hasError:!1,message:""}),setTimeout(function(){Object(h.a)("getMagnetByTitle",t).then(function(t){var a=t.data;e.setState({list:e.state.list.concat(a.list),noMore:0===a.list.length})}).catch(function(t){e.setState({hasError:!0,message:t.message})}).finally(function(){e.updateLoading(!1)})},1e3)}},{key:"search",value:function(e){var t=e.title,a=void 0===t?"":t,n=e.page,s=void 0===n?1:n;this.setState({list:[],title:"",noMore:!1}),this.setSearchParams({title:a,page:s}),this.getMagnetByTitle()}},{key:"nextPage",value:function(){var e=this.state.searchParams.page+1;this.setSearchParams({page:e}),this.getMagnetByTitle()}},{key:"updateLoading",value:function(e){this.setState({isLoading:e})}},{key:"onScroll",value:function(e){if(!(this.state.isLoading||this.state.noMore||this.state.hasError)){var t=e.target,a=t.scrollHeight,n=t.scrollTop;a-E-n<20&&this.nextPage()}}},{key:"render",value:function(){var e=this,t=this.state.isLoading;return u.a.createElement("main",{className:"page-magnet",onScroll:function(t){return e.onScroll(t)}},u.a.createElement(v,{class:"search",keyword:this.state.title,onSearch:function(t){return e.search({title:t})}}),u.a.createElement(y,{list:this.state.list}),t&&u.a.createElement(m.a,{loading:t}),this.state.hasError&&u.a.createElement("div",null,this.state.message),!t&&this.state.noMore&&u.a.createElement("div",{className:"no-result"},0===this.state.list.length?"</> There's nothing here ...":"</End>"))}}]),t}(l.Component);t.default=j},44:function(e,t,a){"use strict";var n=a(6),s=a(7),r=a(9),i=a(8),c=a(10),o=a(0),l=a.n(o),u=a(14),m=a.n(u),h=(a(46),function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=m()({"c-spin":!0,spinning:this.props.loading});return l.a.createElement("div",{className:e},l.a.createElement("div",{className:"c-spin__box"},l.a.createElement("span",{className:"c-spin__animate"},l.a.createElement("div",{className:"primary primary-red"}),l.a.createElement("div",{className:"primary primary-green"}),l.a.createElement("div",{className:"primary primary-blue"}))))}}]),t}(o.Component));t.a=h},45:function(e,t,a){"use strict";var n=a(48),s=a.n(n),r=a(43),i=Object(r.a)({baseURL:""},{getMagnetByTitle:{method:"GET",desc:"\u901a\u8fc7\u6807\u9898\u641c\u7d22\u78c1\u529b\u94fe\u63a5",url:"/api/magnet/getByTitle"}},{in_theaters:{method:"GET",desc:"\u6b63\u5728\u70ed\u6620",url:"/v2/movie/in_theaters"},coming_soon:{method:"GET",desc:"\u5373\u5c06\u4e0a\u6620",url:"/v2/movie/coming_soon"},weekly:{method:"GET",desc:"\u53e3\u7891\u699c[\u9700\u8981\u6743\u9650]",url:"/v2/movie/weekly"},new_movies:{method:"GET",desc:"\u65b0\u7247\u699c[\u9700\u8981\u6743\u9650]",url:"/v2/movie/new_movies"},top250:{method:"GET",desc:"Top250",url:"/v2/movie/top250"},us_box:{method:"GET",desc:"\u5317\u7f8e\u7968\u623f\u699c",url:"/v2/movie/us_box"},search:{method:"GET",desc:"",url:"/v2/movie/search"},get_movie_detail:{method:"GET",desc:"\u83b7\u53d6\u7535\u5f71\u8be6\u60c5",suffix:"id",url:"/v2/movie/subject/:id"}}),c=s.a.create({baseURL:i.baseURL,headers:{"Content-Type":"json"}});function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Date.now().toString(16);return Object.assign({},e,{token:t})}c.interceptors.request.use(function(e){switch(e.method){case"put":case"post":case"patch":e.data=o(e.data);break;default:e.params=o(e.data)}return e},function(e){return alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.message)),Promise.reject(e)}),c.interceptors.response.use(function(e){return e.data},function(e){if("undefined"===typeof e.response)return alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.message,"\n").concat(e.config.url)),Promise.reject(e);switch(e.response.status){case 403:alert(403);break;default:alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.response.status,"\n").concat(e.response.config.url))}return Promise.reject(e)});t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i[e],n=i[e],s=n.url,r=n.method;return"undefined"!==typeof a.suffix&&""!==a.suffix&&(s=s.replace(":".concat(a.suffix),t[a.suffix])),c({url:s,method:r,data:t})}},46:function(e,t,a){},85:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}}]);
//# sourceMappingURL=6.37e74acb.chunk.js.map