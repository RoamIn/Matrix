{"version":3,"sources":["pages/Magnet/components/Search/index.jsx","components/base/toast/Notice.js","components/base/toast/Notification.js","components/base/toast/Toast.js","components/base/toast/index.js","pages/Magnet/components/MagnetList/index.jsx","pages/Magnet/index.jsx","api/index.js","api/magnet.js","api/movie.js","utils/ajax.js","components/base/spin/index.jsx"],"names":["Search","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","search","keyword","onSearch","handleChange","event","setState","value","target","trim","handleSubmit","preventDefault","state","handleClear","_queryString$parse$ti","queryString","parse","window","location","title","react_default","a","createElement","className","onSubmit","icon","type","maxLength","placeholder","autoComplete","autoFocus","spellCheck","onChange","onClick","v-show","Component","Notice","shouldClose","_this2","duration","closeTimer","setTimeout","close","clearCloseTimer","clearTimeout","_this3","timer","onClose","_this$props","prefixCls","iconClass","content","classNames","info","success","warning","error","leave","concat","React","defaultProps","Notification","notices","hasMask","notice","key","getUuid","mask","filter","item","length","push","previousState","result","map","base_toast_Notice","assign","remove","_this$state","noticesDOM","getNoticeDOM","maskDOM","getMaskDOM","noticeNumber","Date","getTime","reWrite","properties","div","_ref","esm_extends","document","body","appendChild","notification","ReactDOM","render","Notification_Notification","noticeProps","add","removeNotice","destroy","unmountComponentAtNode","removeChild","component","newNotification","arguments","undefined","Toast","show","loading","hide","magnet","copy","list","index","moment","created","ISO_8601","format","toFixed","WINDOW_INNER_HEIGHT","innerHeight","MagnetPage","searchParams","page","isLoading","noMore","hasError","message","params","data","objectSpread","updateLoading","ajax","then","catch","finally","_ref2$title","_ref2","_ref2$page","setSearchParams","getMagnetByTitle","bool","e","_e$target","scrollHeight","scrollTop","nextPage","onScroll","Magnet_components_Search","class","components_MagnetList","spin","src_api","baseURL","method","desc","url","search_tags","search_subjects","get_movie_detail","suffix","_ajaxConfig","axios","create","API","headers","Content-Type","mixinGlobalParams","token","now","toString","interceptors","request","use","config","alert","Promise","reject","response","status","apiName","api","_API$apiName","replace","Spin","classnames","c-spin","spinning","react__WEBPACK_IMPORTED_MODULE_5___default"],"mappings":"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","file":"static/js/6.e7ccaf96.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport queryString from 'query-string'\r\n\r\nimport Icon from '@/components/base/icon'\r\n\r\nimport './index.scss'\r\n\r\nclass Search extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            value: ''\r\n        }\r\n    }\r\n\r\n    search = (keyword) => {\r\n        this.props.onSearch(keyword)\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            value: event.target.value.trim()\r\n        })\r\n    }\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        this.search(this.state.value)\r\n    }\r\n\r\n    handleClear = () => {\r\n        this.setState({\r\n            value: ''\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { title = '' } = queryString.parse(window.location.search)\r\n\r\n        this.setState({\r\n            value: title\r\n        })\r\n        this.search(title)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"magnet-search-form\" onSubmit={this.handleSubmit}>\r\n                <Icon className=\"icon icon-search\" type=\"search\" />\r\n                <input type=\"text\"\r\n                    maxLength=\"20\"\r\n                    placeholder=\"Search ...\"\r\n                    autoComplete=\"off\"\r\n                    autoFocus=\"autofocus\"\r\n                    spellCheck=\"false\"\r\n                    value={this.state.value}\r\n                    onChange={this.handleChange} />\r\n                <Icon className=\"icon icon-close\" type=\"close\"\r\n                    onClick={this.handleClear}\r\n                    v-show=\"keyword !== ''\" />\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search","import React from 'react'\r\nimport classNames from 'classnames'\r\nimport './Notice.scss'\r\n\r\nfunction empty () { }\r\n\r\nclass Notice extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            shouldClose: false, // 是否开启关闭动画\r\n        }\r\n    }\r\n    componentDidMount () {\r\n        if (this.props.duration > 0) {\r\n            this.closeTimer = setTimeout(() => {\r\n                this.close();\r\n            }, this.props.duration - 300); // 减掉消失动画300毫秒\r\n        }\r\n    }\r\n    componentWillUnmount () {\r\n        // 当有意外关闭的时候 清掉定时器\r\n        this.clearCloseTimer();\r\n    }\r\n    clearCloseTimer () {\r\n        if (this.closeTimer) {\r\n            clearTimeout(this.closeTimer);\r\n            this.closeTimer = null;\r\n        }\r\n    }\r\n    close () {\r\n        // 关闭的时候 应该先清掉倒数定时器\r\n        // 然后开启过场动画\r\n        // 等待动画结束 执行回调\r\n        this.clearCloseTimer();\r\n        const _this = this;\r\n        _this.setState({ shouldClose: true });\r\n        this.timer = setTimeout(() => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose();\r\n            }\r\n            clearTimeout(_this.timer);\r\n        }, 300);\r\n    }\r\n    render () {\r\n        const { shouldClose } = this.state;\r\n        const { prefixCls, type, iconClass, content } = this.props;\r\n\r\n        return (\r\n            <div\r\n                className={classNames([prefixCls,\r\n                    { 'info': type === 'info' },\r\n                    { 'success': type === 'success' },\r\n                    { 'warning': type === 'warning' },\r\n                    { 'error': type === 'error' },\r\n                    { 'leave': shouldClose }\r\n                ])}\r\n            >\r\n                {iconClass ? <div className={`${prefixCls}-icon`}><span className={classNames(['fa', iconClass])} /></div> : null}\r\n                <div className={`${prefixCls}-content`}>{content}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nNotice.defaultProps = {\r\n    prefixCls: 'notice',\r\n    duration: 3000,\r\n    onClose: empty\r\n};\r\n\r\nexport default Notice","// Notification是Notice父组件，容器\r\n// 是动态插入和删除DOM节点的核心\r\n// 同时也向上暴露给Toast重写改变自己的方法\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport Notice from './Notice'\r\nimport './Notification.scss'\r\n\r\nclass Notification extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            notices: [], // 存储当前有的notices\r\n            hasMask: true, // 是否显示蒙版\r\n        }\r\n    }\r\n    add (notice) {\r\n        // 添加notice\r\n        // 创造一个不重复的key\r\n        const { notices } = this.state;\r\n        const key = notice.key ? notice.key : notice.key = getUuid();\r\n        const mask = notice.mask ? notice.mask : false;\r\n        const temp = notices.filter((item) => item.key === key).length;\r\n\r\n        if (!temp) {\r\n            // 不存在重复的 添加\r\n            notices.push(notice);\r\n            this.setState({\r\n                notices: notices,\r\n                hasMask: mask\r\n            });\r\n        }\r\n    }\r\n    remove (key) {\r\n        // 根据key删除对应\r\n        this.setState(previousState => ({ notices: previousState.notices.filter(notice => notice.key !== key) }));\r\n    }\r\n    getNoticeDOM () {\r\n        const _this = this;\r\n        const { notices } = this.state;\r\n        const result = [];\r\n\r\n        notices.map((notice) => {\r\n            // 每个Notice onClose的时候 删除掉notices中对应key的notice\r\n            const closeCallback = () => {\r\n                _this.remove(notice.key);\r\n                // 如果有用户传入的onClose 执行\r\n                if (notice.onClose) notice.onClose();\r\n            };\r\n\r\n            result.push(\r\n                <Notice\r\n                    key={notice.key} {...notice}\r\n                    onClose={closeCallback}\r\n                />\r\n            );\r\n        });\r\n\r\n        return result;\r\n    }\r\n    getMaskDOM () {\r\n        const { notices, hasMask } = this.state;\r\n        // notices为空的时候 不显示蒙版\r\n        // 始终只有一个蒙版\r\n        if (notices.length > 0 && hasMask === true) return <div className=\"zby-mask\" />;\r\n    }\r\n    render () {\r\n        const { prefixCls } = this.props;\r\n        const noticesDOM = this.getNoticeDOM();\r\n        const maskDOM = this.getMaskDOM();\r\n\r\n        return (\r\n            <div className={prefixCls}>\r\n                {maskDOM}\r\n                <div className={`${prefixCls}-box`}>\r\n                    {noticesDOM}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// 统计notice总数 防止重复\r\nlet noticeNumber = 0;\r\n\r\n// 生成唯一的id\r\nconst getUuid = () => {\r\n    return 'notification-' + new Date().getTime() + '-' + noticeNumber++;\r\n};\r\n\r\n// Notification增加一个重写方法\r\n// 该方法方便Notification组件动态添加到页面中和重写\r\nNotification.reWrite = function (properties) {\r\n    const { ...props } = properties || {};\r\n\r\n    let div;\r\n\r\n    div = document.createElement('div');\r\n    document.body.appendChild(div);\r\n\r\n    const notification = ReactDOM.render(<Notification {...props} />, div);\r\n\r\n    return {\r\n        notice (noticeProps) {\r\n            notification.add(noticeProps);\r\n        },\r\n        removeNotice (key) {\r\n            notification.remove(key);\r\n        },\r\n        destroy () {\r\n            ReactDOM.unmountComponentAtNode(div);\r\n            document.body.removeChild(div);\r\n        },\r\n        component: notification\r\n    }\r\n};\r\n\r\nNotification.defaultProps = {\r\n    prefixCls: 'notification',\r\n};\r\n\r\nexport default Notification","import Notification from './Notification'\r\n\r\n// Toast组件比较特殊\r\n// 因为<Toast />不会被直接渲染在DOM中\r\n// 而是动态插入页面中\r\n// Toast组件核心就是通过Notification暴露的重写方法 动态改变Notification\r\nlet newNotification;\r\n\r\n// 获得一个Notification\r\nconst getNewNotification = () => {\r\n    // 单例 保持页面始终只有一个Notification\r\n    if (!newNotification) {\r\n        newNotification = Notification.reWrite();\r\n    }\r\n\r\n    return newNotification;\r\n};\r\n\r\n// notice方法实际上就是集合参数 完成对Notification的改变\r\nconst notice = (type, content, mask = false, iconClass, onClose, duration) => {\r\n    let notificationInstance = getNewNotification();\r\n\r\n    notificationInstance.notice({\r\n        duration,\r\n        type,\r\n        mask,\r\n        iconClass,\r\n        content,\r\n        onClose: () => {\r\n            if (onClose) onClose();\r\n        },\r\n    });\r\n};\r\n\r\nexport default {\r\n    // 无动画\r\n    show: (content, mask, iconClass, onClose, duration) => (notice(undefined, content, mask, iconClass, onClose, duration)),\r\n    // 翻转效果\r\n    info: (content, mask, iconClass, onClose, duration) => (notice('info', content, mask, iconClass, onClose, duration)),\r\n    // 缩放效果\r\n    success: (content, mask, iconClass, onClose, duration) => (notice('success', content, mask, iconClass, onClose, duration)),\r\n    // 从下方滑入\r\n    warning: (content, mask, iconClass, onClose, duration) => (notice('warning', content, mask, iconClass, onClose, duration)),\r\n    // 抖动\r\n    error: (content, mask, iconClass, onClose, duration) => (notice('error', content, mask, iconClass, onClose, duration)),\r\n    // loading\r\n    loading: (content) => (notice(undefined, content || '加载中...', true, 'fa-circle-o-notch fa-spin', undefined, 0)),\r\n    // 销毁\r\n    hide () {\r\n        if (newNotification) {\r\n            newNotification.destroy();\r\n            newNotification = null;\r\n        }\r\n    },\r\n}","import Toast from './Toast'\r\n\r\nexport default Toast;","import React, { Component } from 'react';\r\nimport moment from 'moment';\r\nimport copy from 'copy-to-clipboard';\r\n\r\nimport Icon from '@/components/base/icon';\r\nimport Toast from '@/components/base/toast';\r\n\r\nimport './index.scss';\r\n\r\nclass Search extends Component {\r\n  copy(magnet) {\r\n    copy(magnet);\r\n\r\n    Toast.success('复制成功!');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ul className=\"magnet-list\">\r\n        {this.props.list.map((item, index) => (\r\n          <li className=\"magnet-list__item\" key={index}>\r\n            <div className=\"magnet\">\r\n              <div className=\"magnet__content\">\r\n                <h4 className=\"magnet__title\">{item.title}</h4>\r\n                <div className=\"magnet__sub-info\">\r\n                  <time className=\"magnet__create-time\">\r\n                    <Icon className=\"icon-time\" type=\"calendar\" />\r\n                    {moment(item.created, moment.ISO_8601).format('YYYY-MM-DD')}\r\n                  </time>\r\n                  <span className=\"magnet__size\">\r\n                    <Icon className=\"icon-attachment\" type=\"attachment\" />\r\n                    {(item.length / 1073741824).toFixed(2)} G\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"magnet__attachment\">\r\n                <button\r\n                  className=\"copy-btn\"\r\n                  onClick={() => this.copy(item.magnet)}\r\n                >\r\n                  复制磁力链接\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Search;\r\n","import React, { Component } from 'react';\r\n\r\nimport Spin from '@/components/base/spin';\r\n\r\nimport ajax from '@/utils/ajax';\r\n\r\nimport Search from './components/Search';\r\nimport MagnetList from './components/MagnetList';\r\n\r\nimport './index.scss';\r\n\r\nconst WINDOW_INNER_HEIGHT = window.innerHeight;\r\n\r\nclass MagnetPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      list: [],\r\n      searchParams: {\r\n        title: '',\r\n        page: 1\r\n      },\r\n      isLoading: false,\r\n      noMore: false,\r\n      hasError: false,\r\n      message: ''\r\n    };\r\n  }\r\n\r\n  setSearchParams(params = {}) {\r\n    this.setState({\r\n      searchParams: Object.assign(this.state.searchParams, params)\r\n    });\r\n  }\r\n\r\n  getMagnetByTitle() {\r\n    const data = { ...this.state.searchParams };\r\n\r\n    this.updateLoading(true);\r\n    this.setState({\r\n      hasError: false,\r\n      message: ''\r\n    });\r\n\r\n    setTimeout(() => {\r\n      ajax('getMagnetByTitle', data)\r\n        .then(({ data }) => {\r\n          this.setState({\r\n            list: this.state.list.concat(data.list),\r\n            noMore: data.list.length === 0\r\n          });\r\n        })\r\n        .catch(error => {\r\n          this.setState({\r\n            hasError: true,\r\n            message: error.message\r\n          });\r\n        })\r\n        .finally(() => {\r\n          this.updateLoading(false);\r\n        });\r\n    }, 1000);\r\n  }\r\n\r\n  search({ title = '', page = 1 }) {\r\n    this.setState({\r\n      list: [],\r\n      title: '',\r\n      noMore: false\r\n    });\r\n\r\n    this.setSearchParams({ title, page });\r\n    this.getMagnetByTitle();\r\n  }\r\n\r\n  nextPage() {\r\n    const page = this.state.searchParams.page + 1;\r\n\r\n    this.setSearchParams({ page });\r\n    this.getMagnetByTitle();\r\n  }\r\n\r\n  updateLoading(bool) {\r\n    this.setState({\r\n      isLoading: bool\r\n    });\r\n  }\r\n\r\n  onScroll(e) {\r\n    if (this.state.isLoading || this.state.noMore || this.state.hasError) {\r\n      return;\r\n    }\r\n\r\n    const { scrollHeight, scrollTop } = e.target;\r\n    const distanceToBottom = scrollHeight - WINDOW_INNER_HEIGHT - scrollTop;\r\n\r\n    if (distanceToBottom < 20) {\r\n      this.nextPage();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <main className=\"page-magnet\" onScroll={e => this.onScroll(e)}>\r\n        <Search\r\n          class=\"search\"\r\n          keyword={this.state.title}\r\n          onSearch={title => this.search({ title })}\r\n        />\r\n\r\n        <MagnetList list={this.state.list} />\r\n        {isLoading && <Spin loading={isLoading} />}\r\n        {this.state.hasError &&\r\n          <div className=\"error\">\r\n            {this.state.message}\r\n          </div>}\r\n        {!isLoading &&\r\n          this.state.noMore &&\r\n          <div className=\"no-result\">\r\n            {this.state.list.length === 0\r\n              ? `</> There's nothing here ...`\r\n              : '</End>'}\r\n          </div>}\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MagnetPage;\r\n","import magnet from './magnet'\r\nimport movie from './movie'\r\n\r\nexport default {\r\n  baseURL: '',\r\n  ...magnet,\r\n  ...movie\r\n}\r\n","export default {\r\n  getMagnetByTitle: {\r\n    method: 'GET',\r\n    desc: '通过标题搜索磁力链接',\r\n    url: '/api/magnet/getByTitle'\r\n  }\r\n}\r\n","export default {\r\n    search_tags: {\r\n        method: 'GET',\r\n        desc: '标签',\r\n        url: '/j/search_tags'\r\n        // Request: {\r\n        // type: movie\r\n        // source: index\r\n        // }\r\n\r\n        // Response: {\r\n        //     {\"tags\":[\"热门\",\"最新\",\"豆瓣高分\",\"冷门佳片\",\"华语\",\"欧美\",\"韩国\",\"日本\"]}\r\n        // }\r\n    },\r\n    search_subjects: {\r\n        method: 'GET',\r\n        desc: '正在热映',\r\n        url: '/j/search_subjects',\r\n        // Request: {\r\n        // type: movie\r\n        // tag: 最新\r\n        // page_limit: 50\r\n        // page_start: 0            \r\n        // }\r\n\r\n        // Response: {\r\n        //     \"subjects\": [<Subject>, ...],\r\n        // }\r\n    },\r\n    // https://m.douban.com/rexxar/api/v2/movie/30295905?ck=&for_mobile=1\r\n    get_movie_detail: {\r\n        method: 'GET',\r\n        desc: '获取电影详情',\r\n        url: '/rexxar/api/v2/movie/:id',\r\n        suffix: 'id'\r\n    }\r\n}\r\n","import axios from 'axios'\r\n\r\nimport API from '@/api'\r\n\r\n// 基础配置\r\nconst _ajaxConfig = axios.create( {\r\n    baseURL: API.baseURL,\r\n    headers: {\r\n        'Content-Type': 'json'\r\n    }\r\n} )\r\n\r\n/**\r\n * 混入全局参数 token\r\n * @param params\r\n * @returns {{} & {} & {token: *}}\r\n */\r\nfunction mixinGlobalParams ( params = {} ) {\r\n    const token = ( Date.now() ).toString( 16 )\r\n\r\n    return Object.assign( {}, params, {\r\n        token\r\n    } )\r\n}\r\n\r\n// Add a request interceptor\r\n_ajaxConfig.interceptors.request.use( ( config ) => {\r\n    // 混入公共参数\r\n    switch ( config.method ) {\r\n        case 'put':\r\n        case 'post':\r\n        case 'patch':\r\n            // 这些情况，请求参数放在 params\r\n            config.data = mixinGlobalParams( config.data )\r\n\r\n            break\r\n        default:\r\n            // 默认，请求参数放在 params\r\n            config.params = mixinGlobalParams( config.data )\r\n    }\r\n\r\n    return config\r\n}, ( error ) => {\r\n    // Do something with request error\r\n    alert( `网络错误\\n${error.message}` )\r\n\r\n    return Promise.reject( error )\r\n} )\r\n\r\n// Add a response interceptor\r\n_ajaxConfig.interceptors.response.use( ( response ) => {\r\n    // Do something with response data\r\n    const res = response.data\r\n\r\n    // if (res.code !== 0) {\r\n    //     const error = {\r\n    //         code: res.code,\r\n    //         status: response.status,\r\n    //         message: res.data\r\n    //     }\r\n\r\n    //     return Promise.reject(error)\r\n    // }\r\n\r\n    return res\r\n}, ( error ) => {\r\n    // Do something with response error\r\n    if ( typeof error.response === 'undefined' ) {\r\n        alert( `网络错误\\n${error.message}\\n${error.config.url}` )\r\n\r\n        return Promise.reject( error )\r\n    }\r\n\r\n    switch ( error.response.status ) {\r\n        case 403:\r\n            alert( 403 )\r\n\r\n            break\r\n        default:\r\n            alert( `网络错误\\n${error.response.status}\\n${error.response.config.url}` )\r\n    }\r\n\r\n    return Promise.reject( error )\r\n} )\r\n\r\nexport function ajax ( apiName, data = {} ) {\r\n    const api = API[apiName]\r\n    let { url, method } = API[apiName]\r\n\r\n    if ( typeof api.suffix !== 'undefined' && api.suffix !== '' ) {\r\n        url = url.replace( `:${api.suffix}`, data[api.suffix] )\r\n    }\r\n\r\n    return _ajaxConfig( {\r\n        url,\r\n        method,\r\n        data\r\n    } )\r\n}\r\n\r\nexport default ajax","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\n\r\nclass Spin extends Component {\r\n    render() {\r\n        const className = classnames({\r\n            'c-spin': true,\r\n            'spinning': this.props.loading\r\n        })\r\n\r\n        return (\r\n            <div className={className}>\r\n                <div className=\"c-spin__box\">\r\n                    <span className=\"c-spin__animate\">\r\n                        <div className=\"primary primary-red\"></div>\r\n                        <div className=\"primary primary-green\"></div>\r\n                        <div className=\"primary primary-blue\"></div>\r\n                    </span>\r\n                    {/* <span className=\"c-spin__text\">Loading...</span> */}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Spin"],"sourceRoot":""}