(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{100:function(e,t,a){"use strict";a.r(t);var n=a(39),i=a(4),s=a(5),r=a(7),c=a(6),l=a(8),o=a(0),m=a.n(o),d=a(12),u=a.n(d),v=a(13),p=(a(89),function(e){function t(e){var a,n=e.width,s=void 0===n?"345px":n,l=e.visible,o=void 0!==l&&l;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this))).state={width:s,visible:o},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"close",value:function(){this.setState({visible:!1}),this.props.onClose&&this.props.onClose()}},{key:"componentWillReceiveProps",value:function(e){var t=e.visible;this.setState({visible:t})}},{key:"render",value:function(){var e=this,t=u()({"c-drawer":!0,"is-visible":this.state.visible});return m.a.createElement("div",{className:t,style:{width:this.state.width,right:this.state.visible?0:"-".concat(this.state.width)}},m.a.createElement("div",{className:"c-drawer__close-trigger",onClick:function(){return e.close()}},m.a.createElement(v.a,{type:"menu-fold"})),m.a.createElement("div",{className:"c-drawer__body"},this.props.children))}}]),t}(o.Component)),h=(a(90),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this))).handleChange=function(e){var t=e.key,n=a.props.onChange;a.setState({activeKey:t}),n&&n(t)},a.state={activeKey:e.defaultActiveKey.activeKey||e.defaultActiveKey||a.default.defaultActiveKey},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.activeKey;e.activeKey!==t&&""!==t&&this.setState({activeKey:t})}},{key:"renderHeader",value:function(){var e=this;return m.a.Children.map(this.props.children,function(t,a){var n=t.key===e.state.activeKey?"is-active":null;return m.a.createElement("span",{className:u()("c-tabs__title",n),onClick:function(){e.handleChange(t)}},t.props.title)})}},{key:"renderContent",value:function(){var e=this;return m.a.Children.map(this.props.children,function(t){if(t.key===e.state.activeKey)return m.a.createElement("div",{className:"c-tabs__pane"},t.props.children)})}},{key:"render",value:function(){return m.a.createElement("div",{className:"c-tabs"},m.a.createElement("div",{className:"c-tabs__header"},this.renderHeader()),m.a.createElement("div",{className:"c-tabs__body"},this.renderContent()))}}]),t}(o.Component));h.defaultProps={defaultActiveKey:"1"};var f=h,b=a(38),y=a(40);function g(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}a(91);var _=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.src,a=void 0===t?"":t,n=e.alt,i=g(e,["src","alt"]);return m.a.createElement("img",Object.assign({src:"/picture/"+a,alt:n},i))}}]),t}(o.Component),E=(a(92),function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("ul",{className:"movies"},this.props.list.map(function(t){return m.a.createElement("li",{className:"movie",key:t.id,onClick:function(){return e.props.onClick(t.id)}},m.a.createElement("div",{className:"movie__poster"},m.a.createElement(_,{src:t.cover,alt:t.title,loading:"lazy"})),m.a.createElement("div",{className:"movie__footer"},m.a.createElement("div",{className:"movie__title"},t.title),m.a.createElement("span",{className:"movie__rating"},t.rate)))}))}}]),t}(o.Component)),j=(a(93),window.innerHeight),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleScroll=function(e){if(!(a.state.isLoading||a.state.noMore||a.state.hasError)){var t=e.target,n=t.scrollHeight,i=t.scrollTop;n-j-i<20&&(console.log("next"),a.search(a.state.params.page_start+a.state.params.page_limit))}},a.state={list:[],isLoading:!1,noMore:!1,hasError:!1,message:"",params:Object(n.a)({},e.params,{type:"movie",page_limit:20,page_start:0})},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"updateLoading",value:function(e){this.setState({isLoading:e})}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setState({params:Object(n.a)({},this.state.params,{page_start:t})}),this.updateLoading(!0),Object(b.a)("search_subjects",Object(n.a)({},this.state.params,{page_start:t,page_limit:this.state.params.page_limit})).then(function(t){var a=t.subjects;e.setState({list:e.state.list.concat(a),noMore:0===a.length})}).catch(function(e){console.log(e.message)}).finally(function(){e.updateLoading(!1)})}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.params)!==JSON.stringify(this.props.params)&&this.search()}},{key:"componentDidMount",value:function(){this.search()}},{key:"render",value:function(){var e=this.state.isLoading;return m.a.createElement("section",{className:"movie-stage",onScroll:this.handleScroll},m.a.createElement("div",{className:"movie-stage__body"},m.a.createElement(E,{list:this.state.list,onClick:this.props.onClick}),e&&m.a.createElement(y.a,{loading:e})))}}]),t}(o.Component),N=a(33),k=a(36),w=(a(94),function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=Math.ceil(this.props.rate),t=[],a=[],n=u()("c-rate",this.props.className),i=0;i<parseInt(e/2);i++)t.push(m.a.createElement(v.a,{type:"star",key:i}));for(var s=0;s<5-parseInt(e/2)-e%2;s++)a.push(m.a.createElement(v.a,{type:"star-outline",key:s}));return m.a.createElement("div",{className:n},t,e%2===1&&m.a.createElement(v.a,{type:"star-half"}),a,m.a.createElement("span",{className:"c-rate__num"},this.props.rate))}}]),t}(o.Component)),C=(a(95),function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"c-celebrities"},this.props.list.map(function(e,t){return m.a.createElement("div",{className:"c-celebrity",key:e.id},m.a.createElement("div",{className:"c-celebrity__avatar"},m.a.createElement(_,{src:e.avatar.normal,alt:e.name,loading:"lazy"})),m.a.createElement("div",{className:"c-celebrity__name"},e.name))}))}}]),t}(o.Component));C.defaultProps={list:[]};var S=C,x=(a(96),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this))).state={id:0,data:{countries:[],directors:[],casts:[],genres:[],images:[],aka:[],rating:{}},isLoading:!0},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"updateLoading",value:function(e){this.setState({isLoading:e})}},{key:"getMovieDetail",value:function(e){var t=this;if(0===e)return!1;this.updateLoading(!0),Object(b.a)("get_movie_detail",{id:e,ck:"",for_mobile:1}).then(function(e){console.log(e),t.setState({data:e})}).catch(function(e){console.log(e.message)}).finally(function(){t.updateLoading(!1)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;this.setState({id:t}),this.getMovieDetail(t)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.data,n=null;return n=t?m.a.createElement(y.a,{loading:t}):m.a.createElement("div",{className:"movie-detail"},m.a.createElement("div",{className:"movie-detail__header"},a.title),m.a.createElement("div",{className:"movie-detail__body"},m.a.createElement("div",{className:"movie-detail__poster"},m.a.createElement(_,{src:a.pic.normal,alt:"poster"})),m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card__body"},m.a.createElement("div",{className:"detail-info-item"},m.a.createElement("span",{className:"detail-info-item__label"},"\u8c46\u74e3\u8bc4\u5206: "),m.a.createElement("span",{className:"detail-info-item__text"},m.a.createElement(w,{rate:a.rating.value}))),m.a.createElement("div",{className:"detail-info-item"},m.a.createElement("span",{className:"detail-info-item__label"},"\u7c7b\u578b: "),m.a.createElement("span",{className:"detail-info-item__text"},a.genres.join(" / "))),m.a.createElement("div",{className:"detail-info-item"},m.a.createElement("span",{className:"detail-info-item__label"},"\u5236\u7247\u56fd\u5bb6/\u5730\u533a: "),m.a.createElement("span",{className:"detail-info-item__text"},a.countries.join(" / "))),m.a.createElement("div",{className:"detail-info-item"},m.a.createElement("span",{className:"detail-info-item__label"},"\u4e0a\u6620\u65e5\u671f: "),m.a.createElement("span",{className:"detail-info-item__text"},a.year)),m.a.createElement("div",{className:"detail-info-item"},m.a.createElement("span",{className:"detail-info-item__label"},"\u53c8\u540d: "),m.a.createElement("span",{className:"detail-info-item__text"},a.aka.join(" / "))))),m.a.createElement("div",{className:"card"},m.a.createElement("h4",{className:"card__title"},"\u5bfc\u6f14"),m.a.createElement("div",{className:"card__body"},m.a.createElement(S,{className:"directors",list:a.directors}))),m.a.createElement("div",{className:"card"},m.a.createElement("h4",{className:"card__title"},"\u4e3b\u6f14"),m.a.createElement("div",{className:"card__body"},m.a.createElement(S,{className:"casts",list:a.actors}))),m.a.createElement("div",{className:"card"},m.a.createElement("h4",{className:"card__title"},"\u5267\u60c5\u7b80\u4ecb"),m.a.createElement("div",{className:"card__body"},m.a.createElement("p",{className:"summary"},a.intro)))),m.a.createElement("div",{className:"movie-detail__footer"},m.a.createElement(N.a,{className:"search-button",to:{pathname:"/magnet",search:"?title=".concat(this.state.data.title)},target:"_blank"},"Search Magnet"))),m.a.createElement("div",{className:"movie-detail-wrapper"},n)}}]),t}(o.Component)),K=Object(k.a)(x),L=(a(97),function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={movieTagList:[],movieId:0,tabsActiveKey:"",drawer:{width:"345px",visible:!1}},a.handleViewMovie=function(e){a.setState({movieId:e}),a.showDrawer()},a.handleDrawerClose=function(){a.setState({drawer:Object(n.a)({},a.state.drawer,{visible:!1})})},a.handleTabsChange=function(e){e!==a.state.tabsActiveKey&&a.setState({tabsActiveKey:""})},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"showDrawer",value:function(){this.setState({drawer:Object(n.a)({},this.state.drawer,{visible:!0})})}},{key:"getMovieTags",value:function(){var e=this;Object(b.a)("search_tags",{type:"movie",source:"index"}).then(function(t){var a=t.tags;e.setState({movieTagList:a,tabsActiveKey:a[0]})}).catch(function(e){console.log(e.message)})}},{key:"componentDidMount",value:function(){this.getMovieTags()}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"page-movies"},m.a.createElement("div",{className:"page-movies__body"},m.a.createElement(f,{defaultActiveKey:"in_theaters",activeKey:this.state.tabsActiveKey,onChange:this.handleTabsChange},this.state.movieTagList.map(function(t){return m.a.createElement("div",{title:t,key:t},m.a.createElement(O,{params:{tag:t},onClick:e.handleViewMovie}))}))),m.a.createElement("div",{className:"page-movies__drawer",style:{width:this.state.drawer.visible?this.state.drawer.width:0}},m.a.createElement(p,{width:this.state.drawer.width,visible:this.state.drawer.visible,onClose:this.handleDrawerClose},m.a.createElement(K,{id:this.state.movieId}))))}}]),t}(o.Component));t.default=L},38:function(e,t,a){"use strict";var n=a(43),i=a.n(n),s=a(39),r=Object(s.a)({baseURL:""},{getMagnetByTitle:{method:"GET",desc:"\u901a\u8fc7\u6807\u9898\u641c\u7d22\u78c1\u529b\u94fe\u63a5",url:"/api/magnet/getByTitle"}},{search_tags:{method:"GET",desc:"\u6807\u7b7e",url:"/j/search_tags"},search_subjects:{method:"GET",desc:"\u6b63\u5728\u70ed\u6620",url:"/j/search_subjects"},get_movie_detail:{method:"GET",desc:"\u83b7\u53d6\u7535\u5f71\u8be6\u60c5",url:"/rexxar/api/v2/movie/:id",suffix:"id"}}),c=i.a.create({baseURL:r.baseURL,headers:{"Content-Type":"json"}});function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Date.now().toString(16);return Object.assign({},e,{token:t})}c.interceptors.request.use(function(e){switch(e.method){case"put":case"post":case"patch":e.data=l(e.data);break;default:e.params=l(e.data)}return e},function(e){return alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.message)),Promise.reject(e)}),c.interceptors.response.use(function(e){return e.data},function(e){if("undefined"===typeof e.response)return alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.message,"\n").concat(e.config.url)),Promise.reject(e);switch(e.response.status){case 403:alert(403);break;default:alert("\u7f51\u7edc\u9519\u8bef\n".concat(e.response.status,"\n").concat(e.response.config.url))}return Promise.reject(e)});t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r[e],n=r[e],i=n.url,s=n.method;return"undefined"!==typeof a.suffix&&""!==a.suffix&&(i=i.replace(":".concat(a.suffix),t[a.suffix])),c({url:i,method:s,data:t})}},40:function(e,t,a){"use strict";var n=a(4),i=a(5),s=a(7),r=a(6),c=a(8),l=a(0),o=a.n(l),m=a(12),d=a.n(m),u=(a(41),function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=d()({"c-spin":!0,spinning:this.props.loading});return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"c-spin__box"},o.a.createElement("span",{className:"c-spin__animate"},o.a.createElement("div",{className:"primary primary-red"}),o.a.createElement("div",{className:"primary primary-green"}),o.a.createElement("div",{className:"primary primary-blue"}))))}}]),t}(l.Component));t.a=u},41:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}}]);
//# sourceMappingURL=4.8fac1eb4.chunk.js.map